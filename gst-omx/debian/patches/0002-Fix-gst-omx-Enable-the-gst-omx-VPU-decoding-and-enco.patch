Description: <short summary of the patch>
 TODO: Put a short summary on the line above and replace this paragraph
 with a longer explanation of this change. Complete the meta-information
 with other relevant fields (see below for details). To make it easier, the
 information below has been extracted from the changelog. Adjust it or drop
 it.
 .
 gst-omx (1.22.0-1) unstable; urgency=low
 .
   * New upstream release.
Author: Ying-Chun Liu (PaulLiu) <paulliu@debian.org>

---
The information above should follow the Patch Tagging Guidelines, please
checkout https://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: (upstream|backport|vendor|other), (<patch-url>|commit:<commit-id>)
Bug: <upstream-bugtracker-url>
Bug-Debian: https://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: (no|not-needed|<patch-forwarded-url>)
Applied-Upstream: <version>, (<commit-url>|commit:<commid-id>)
Reviewed-By: <name and email of someone who approved/reviewed the patch>
Last-Update: 2023-03-01

--- gst-omx-1.22.0.orig/meson.build
+++ gst-omx-1.22.0/meson.build
@@ -228,6 +228,7 @@ elif omx_target == 'tizonia'
   gst_omx_args += ['-I' + tizil_includedir + '/tizonia']
   omx_inc = []
 elif omx_target == 'sf'
+  cdata.set('USE_OMX_TARGET_STARFIVE', 1)
   warning('sf selected')
 else
   error ('Unsupported omx target specified. Use the -Dtarget option')
--- gst-omx-1.22.0.orig/meson.build.orig
+++ gst-omx-1.22.0/meson.build.orig
@@ -227,6 +227,8 @@ elif omx_target == 'tizonia'
   tizil_includedir = tizil_dep.get_variable('includedir')
   gst_omx_args += ['-I' + tizil_includedir + '/tizonia']
   omx_inc = []
+elif omx_target == 'sf'
+  warning('sf selected')
 else
   error ('Unsupported omx target specified. Use the -Dtarget option')
 endif
--- gst-omx-1.22.0.orig/omx/gstomxh264enc.c
+++ gst-omx-1.22.0/omx/gstomxh264enc.c
@@ -824,6 +824,11 @@ gst_omx_h264_enc_get_caps (GstOMXVideoEn
       case OMX_VIDEO_AVCLevel51:
         level = "5.1";
         break;
+#ifdef USE_OMX_TARGET_STARFIVE
+      case OMX_VIDEO_AVCLevel52:
+        level = "5.2";
+        break;
+#else
 #ifdef USE_OMX_TARGET_ZYNQ_USCALE_PLUS
       case OMX_ALG_VIDEO_AVCLevel52:
         level = "5.2";
@@ -838,6 +843,7 @@ gst_omx_h264_enc_get_caps (GstOMXVideoEn
         level = "6.2";
         break;
 #endif
+#endif
       default:
         g_assert_not_reached ();
         gst_caps_unref (caps);
--- gst-omx-1.22.0.orig/omx/gstomxh264utils.c
+++ gst-omx-1.22.0/omx/gstomxh264utils.c
@@ -115,6 +115,10 @@ gst_omx_h264_utils_get_level_from_str (c
     return OMX_VIDEO_AVCLevel5;
   } else if (g_str_equal (level, "5.1")) {
     return OMX_VIDEO_AVCLevel51;
+#ifdef USE_OMX_TARGET_STARFIVE
+  } else if (g_str_equal (level, "5.2")) {
+    return OMX_VIDEO_AVCLevel52;
+#else
 #ifdef USE_OMX_TARGET_ZYNQ_USCALE_PLUS
   } else if (g_str_equal (level, "5.2")) {
     return (OMX_VIDEO_AVCLEVELTYPE) OMX_ALG_VIDEO_AVCLevel52;
@@ -125,6 +129,7 @@ gst_omx_h264_utils_get_level_from_str (c
   } else if (g_str_equal (level, "6.2")) {
     return (OMX_VIDEO_AVCLEVELTYPE) OMX_ALG_VIDEO_AVCLevel62;
 #endif
+#endif
   }
 
   return OMX_VIDEO_AVCLevelMax;
